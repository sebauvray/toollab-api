<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Confirmation d'inscription</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
            background-color: #ffffff;
        }
        .header {
            padding: 40px 30px;
            text-align: center;
            background-color: #ffffff;
            border-bottom: 1px solid #e0e0e0;
        }
        .logo {
            height: 40px;
            width: auto;
        }
        .content {
            padding: 40px 30px;
        }
        .greeting {
            font-size: 16px;
            margin-bottom: 10px;
        }
        .confirmation {
            font-size: 16px;
            margin-bottom: 30px;
            color: #155724;
        }
        .section-title {
            font-size: 18px;
            font-weight: 600;
            color: #343C6A;
            margin: 30px 0 20px 0;
            border-bottom: 1px solid #e0e0e0;
            padding-bottom: 10px;
        }
        .student-block {
            margin-bottom: 30px;
        }
        .student-name {
            font-size: 16px;
            font-weight: 600;
            color: #333;
            margin-bottom: 15px;
        }
        .class-block {
            background-color: #fafafa;
            border-left: 3px solid #343C6A;
            padding: 15px;
            margin-bottom: 15px;
        }
        .class-name {
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
        }
        .schedule-list {
            margin: 10px 0;
        }
        .schedule-item {
            color: #666;
            margin: 5px 0;
            font-size: 14px;
        }
        .telegram-link {
            color: #0088cc;
            text-decoration: none;
            font-size: 14px;
            display: block;
            margin-top: 10px;
        }
        .telegram-link:hover {
            text-decoration: underline;
        }
        .summary-section {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 4px;
            margin-top: 30px;
        }
        .summary-title {
            font-weight: 600;
            margin-bottom: 15px;
            color: #333;
        }
        .summary-row {
            display: flex;
            justify-content: space-between;
            margin: 8px 0;
            font-size: 14px;
            color: #666;
        }
        .summary-total {
            border-top: 1px solid #dee2e6;
            padding-top: 10px;
            margin-top: 10px;
            font-weight: 600;
            color: #333;
        }
        .footer {
            text-align: center;
            padding: 30px;
            font-size: 12px;
            color: #999;
            background-color: #fafafa;
            border-top: 1px solid #e0e0e0;
        }
        .closing {
            margin-top: 30px;
            font-size: 14px;
            color: #666;
        }
    </style>
</head>
<body>
<div class="container">
    <div class="header">
        <svg width="186" height="38" viewBox="0 0 186 38" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g filter="url(#filter0_d_525_706)">
                <path d="M67.9531 27.7493H61.75V8.12427H55.625V5.24927H74.0781V8.12427H67.9531V27.7493ZM94.1406 18.6868C94.1406 19.6243 94.0156 20.5045 93.7656 21.3274C93.5156 22.1503 93.1667 22.9107 92.7188 23.6086C92.2812 24.3066 91.75 24.9368 91.125 25.4993C90.5 26.0514 89.8125 26.5201 89.0625 26.9055C88.3229 27.2909 87.526 27.5878 86.6719 27.7961C85.8281 28.0045 84.9583 28.1086 84.0625 28.1086C83.1667 28.1086 82.2969 28.0045 81.4531 27.7961C80.6094 27.5878 79.8125 27.2909 79.0625 26.9055C78.3229 26.5201 77.6406 26.0514 77.0156 25.4993C76.3906 24.9368 75.8542 24.3066 75.4062 23.6086C74.9688 22.9107 74.625 22.1503 74.375 21.3274C74.125 20.4941 74 19.6139 74 18.6868C74 17.7597 74.125 16.8847 74.375 16.0618C74.625 15.2284 74.9688 14.4628 75.4062 13.7649C75.8542 13.067 76.3906 12.442 77.0156 11.8899C77.6406 11.3274 78.3229 10.8534 79.0625 10.468C79.8125 10.0826 80.6094 9.78573 81.4531 9.57739C82.2969 9.36906 83.1667 9.26489 84.0625 9.26489C84.9583 9.26489 85.8281 9.36906 86.6719 9.57739C87.526 9.78573 88.3229 10.0826 89.0625 10.468C89.8125 10.8534 90.5 11.3274 91.125 11.8899C91.75 12.442 92.2812 13.067 92.7188 13.7649C93.1667 14.4628 93.5156 15.2284 93.7656 16.0618C94.0156 16.8847 94.1406 17.7597 94.1406 18.6868ZM88.7656 18.6868C88.7656 18.1868 88.7344 17.6607 88.6719 17.1086C88.6198 16.5461 88.526 15.9993 88.3906 15.468C88.2552 14.9264 88.0677 14.4107 87.8281 13.9211C87.599 13.4211 87.3125 12.9889 86.9688 12.6243C86.625 12.2493 86.2135 11.9524 85.7344 11.7336C85.2552 11.5045 84.6979 11.3899 84.0625 11.3899C83.4583 11.3899 82.9219 11.5045 82.4531 11.7336C81.9844 11.9628 81.5729 12.2701 81.2188 12.6555C80.875 13.0305 80.5833 13.468 80.3438 13.968C80.1146 14.468 79.9271 14.9889 79.7812 15.5305C79.6354 16.0618 79.5312 16.6034 79.4688 17.1555C79.4062 17.6972 79.375 18.2076 79.375 18.6868C79.375 19.1659 79.4062 19.6816 79.4688 20.2336C79.5312 20.7753 79.6354 21.317 79.7812 21.8586C79.9271 22.4003 80.1146 22.9211 80.3438 23.4211C80.5833 23.9107 80.875 24.3482 81.2188 24.7336C81.5729 25.1086 81.9844 25.4107 82.4531 25.6399C82.9219 25.8691 83.4583 25.9836 84.0625 25.9836C84.6875 25.9836 85.2396 25.8743 85.7188 25.6555C86.1979 25.4264 86.6094 25.1243 86.9531 24.7493C87.3073 24.3743 87.599 23.942 87.8281 23.4524C88.0573 22.9628 88.2396 22.4472 88.375 21.9055C88.5208 21.3639 88.6198 20.817 88.6719 20.2649C88.7344 19.7128 88.7656 19.1868 88.7656 18.6868ZM116.547 18.6868C116.547 19.6243 116.422 20.5045 116.172 21.3274C115.922 22.1503 115.573 22.9107 115.125 23.6086C114.688 24.3066 114.156 24.9368 113.531 25.4993C112.906 26.0514 112.219 26.5201 111.469 26.9055C110.729 27.2909 109.932 27.5878 109.078 27.7961C108.234 28.0045 107.365 28.1086 106.469 28.1086C105.573 28.1086 104.703 28.0045 103.859 27.7961C103.016 27.5878 102.219 27.2909 101.469 26.9055C100.729 26.5201 100.047 26.0514 99.4219 25.4993C98.7969 24.9368 98.2604 24.3066 97.8125 23.6086C97.375 22.9107 97.0312 22.1503 96.7812 21.3274C96.5312 20.4941 96.4062 19.6139 96.4062 18.6868C96.4062 17.7597 96.5312 16.8847 96.7812 16.0618C97.0312 15.2284 97.375 14.4628 97.8125 13.7649C98.2604 13.067 98.7969 12.442 99.4219 11.8899C100.047 11.3274 100.729 10.8534 101.469 10.468C102.219 10.0826 103.016 9.78573 103.859 9.57739C104.703 9.36906 105.573 9.26489 106.469 9.26489C107.365 9.26489 108.234 9.36906 109.078 9.57739C109.932 9.78573 110.729 10.0826 111.469 10.468C112.219 10.8534 112.906 11.3274 113.531 11.8899C114.156 12.442 114.688 13.067 115.125 13.7649C115.573 14.4628 115.922 15.2284 116.172 16.0618C116.422 16.8847 116.547 17.7597 116.547 18.6868ZM111.172 18.6868C111.172 18.1868 111.141 17.6607 111.078 17.1086C111.026 16.5461 110.932 15.9993 110.797 15.468C110.661 14.9264 110.474 14.4107 110.234 13.9211C110.005 13.4211 109.719 12.9889 109.375 12.6243C109.031 12.2493 108.62 11.9524 108.141 11.7336C107.661 11.5045 107.104 11.3899 106.469 11.3899C105.865 11.3899 105.328 11.5045 104.859 11.7336C104.391 11.9628 103.979 12.2701 103.625 12.6555C103.281 13.0305 102.99 13.468 102.75 13.968C102.521 14.468 102.333 14.9889 102.188 15.5305C102.042 16.0618 101.938 16.6034 101.875 17.1555C101.812 17.6972 101.781 18.2076 101.781 18.6868C101.781 19.1659 101.812 19.6816 101.875 20.2336C101.938 20.7753 102.042 21.317 102.188 21.8586C102.333 22.4003 102.521 22.9211 102.75 23.4211C102.99 23.9107 103.281 24.3482 103.625 24.7336C103.979 25.1086 104.391 25.4107 104.859 25.6399C105.328 25.8691 105.865 25.9836 106.469 25.9836C107.094 25.9836 107.646 25.8743 108.125 25.6555C108.604 25.4264 109.016 25.1243 109.359 24.7493C109.714 24.3743 110.005 23.942 110.234 23.4524C110.464 22.9628 110.646 22.4472 110.781 21.9055C110.927 21.3639 111.026 20.817 111.078 20.2649C111.141 19.7128 111.172 19.1868 111.172 18.6868ZM125.172 27.7493H119.891V1.38989H121.922L125.172 6.87427V27.7493ZM134.859 27.7493H129.578V1.38989H131.609L134.859 6.87427V27.7493ZM157.438 27.7493H152.156V25.593C151.531 26.4472 150.776 27.0826 149.891 27.4993C149.016 27.9055 148.052 28.1086 147 28.1086C145.625 28.1086 144.396 27.8639 143.312 27.3743C142.229 26.8847 141.312 26.218 140.562 25.3743C139.812 24.5201 139.24 23.5201 138.844 22.3743C138.448 21.2284 138.25 19.9993 138.25 18.6868C138.25 17.3743 138.448 16.1451 138.844 14.9993C139.24 13.8534 139.812 12.8586 140.562 12.0149C141.312 11.1607 142.229 10.4889 143.312 9.99927C144.396 9.50968 145.625 9.26489 147 9.26489C147.698 9.26489 148.359 9.36906 148.984 9.57739C149.62 9.78573 150.198 10.0826 150.719 10.468C151.25 10.843 151.714 11.3014 152.109 11.843C152.516 12.3743 152.833 12.968 153.062 13.6243L155.406 9.70239H157.438V27.7493ZM152.125 18.6868C152.125 18.218 152.099 17.7232 152.047 17.2024C152.005 16.6816 151.927 16.1659 151.812 15.6555C151.698 15.1451 151.536 14.6607 151.328 14.2024C151.13 13.7336 150.87 13.3222 150.547 12.968C150.234 12.6034 149.854 12.317 149.406 12.1086C148.958 11.9003 148.438 11.7961 147.844 11.7961C147.25 11.7961 146.734 11.9055 146.297 12.1243C145.859 12.3326 145.484 12.6191 145.172 12.9836C144.859 13.3378 144.599 13.7493 144.391 14.218C144.193 14.6868 144.036 15.1764 143.922 15.6868C143.807 16.1972 143.724 16.7128 143.672 17.2336C143.63 17.7441 143.609 18.2284 143.609 18.6868C143.609 19.1451 143.63 19.6347 143.672 20.1555C143.724 20.6764 143.807 21.192 143.922 21.7024C144.036 22.2128 144.193 22.7024 144.391 23.1711C144.599 23.6399 144.859 24.0566 145.172 24.4211C145.484 24.7753 145.859 25.0618 146.297 25.2805C146.734 25.4889 147.25 25.593 147.844 25.593C148.385 25.593 148.865 25.4836 149.281 25.2649C149.708 25.0357 150.078 24.7336 150.391 24.3586C150.714 23.9836 150.984 23.5566 151.203 23.0774C151.422 22.5982 151.599 22.1034 151.734 21.593C151.87 21.0826 151.969 20.5774 152.031 20.0774C152.094 19.567 152.125 19.1034 152.125 18.6868ZM181.047 18.7493C181.047 20.0618 180.849 21.2909 180.453 22.4368C180.057 23.5826 179.484 24.5826 178.734 25.4368C177.984 26.2805 177.068 26.9472 175.984 27.4368C174.901 27.9264 173.672 28.1711 172.297 28.1711C171.599 28.1711 170.932 28.067 170.297 27.8586C169.672 27.6503 169.094 27.3586 168.562 26.9836C168.042 26.5982 167.578 26.1399 167.172 25.6086C166.776 25.0774 166.464 24.4836 166.234 23.8274L163.891 27.7493H161.859V3.06177H167.141V11.8586C167.766 10.9941 168.516 10.3586 169.391 9.95239C170.276 9.54614 171.245 9.34302 172.297 9.34302C173.672 9.34302 174.901 9.58781 175.984 10.0774C177.068 10.567 177.984 11.2336 178.734 12.0774C179.484 12.9211 180.057 13.9159 180.453 15.0618C180.849 16.2076 181.047 17.4368 181.047 18.7493ZM175.688 18.7493C175.688 18.2909 175.661 17.8066 175.609 17.2961C175.568 16.7753 175.49 16.2597 175.375 15.7493C175.26 15.2389 175.099 14.7493 174.891 14.2805C174.693 13.8118 174.438 13.4003 174.125 13.0461C173.812 12.6816 173.438 12.3951 173 12.1868C172.562 11.968 172.047 11.8586 171.453 11.8586C170.911 11.8586 170.427 11.9732 170 12.2024C169.583 12.4211 169.214 12.718 168.891 13.093C168.578 13.468 168.312 13.8951 168.094 14.3743C167.875 14.8534 167.698 15.3482 167.562 15.8586C167.427 16.3691 167.328 16.8743 167.266 17.3743C167.203 17.8743 167.172 18.3326 167.172 18.7493C167.172 19.218 167.193 19.7128 167.234 20.2336C167.286 20.7545 167.37 21.2753 167.484 21.7961C167.599 22.3066 167.755 22.7961 167.953 23.2649C168.161 23.7232 168.422 24.1347 168.734 24.4993C169.057 24.8534 169.438 25.1347 169.875 25.343C170.323 25.5514 170.849 25.6555 171.453 25.6555C172.036 25.6555 172.547 25.5514 172.984 25.343C173.432 25.1243 173.812 24.8378 174.125 24.4836C174.438 24.1191 174.693 23.7024 174.891 23.2336C175.099 22.7545 175.26 22.2597 175.375 21.7493C175.49 21.2389 175.568 20.7284 175.609 20.218C175.661 19.6972 175.688 19.2076 175.688 18.7493Z" fill="#343C6A"/>
            </g>
            <path d="M5.01172 20.1477V16.5365H20.7117C20.7451 15.6185 20.6617 14.8131 20.4617 14.1203C20.2617 13.4102 19.9201 12.8473 19.4367 12.4316C18.9534 12.0159 18.2701 11.8081 17.3867 11.8081C16.5034 11.8081 15.5617 12.0939 14.5617 12.6654C13.5617 13.237 12.6034 14.1203 11.6867 15.3154C10.7701 16.4932 9.97005 18.0087 9.28672 19.862L8.28672 16.6664C9.07005 14.7785 9.96172 13.211 10.9617 11.964C11.9784 10.7169 13.0617 9.78163 14.2117 9.1581C15.3784 8.53458 16.5784 8.22281 17.8117 8.22281C19.2951 8.22281 20.5117 8.5519 21.4617 9.21006C22.4284 9.85091 23.1451 10.7342 23.6117 11.86C24.0784 12.9685 24.3117 14.2416 24.3117 15.6791C24.3117 17.0994 24.1034 18.5889 23.6867 20.1477H5.01172ZM7.26172 20.1477V0.922363H10.8117V20.1477H7.26172Z" fill="#343C6A"/>
            <path d="M46.3216 20.1477V16.5365H30.6216C30.5883 15.6185 30.6716 14.8131 30.8716 14.1203C31.0716 13.4102 31.4133 12.8473 31.8966 12.4316C32.3799 12.0159 33.0633 11.8081 33.9466 11.8081C34.83 11.8081 35.7716 12.0939 36.7716 12.6654C37.7716 13.237 38.73 14.1203 39.6466 15.3154C40.5633 16.4932 41.3633 18.0087 42.0466 19.862L43.0466 16.6664C42.2633 14.7785 41.3716 13.211 40.3716 11.964C39.355 10.7169 38.2716 9.78163 37.1216 9.1581C35.955 8.53458 34.755 8.22281 33.5216 8.22281C32.0383 8.22281 30.8216 8.5519 29.8716 9.21006C28.9049 9.85091 28.1883 10.7342 27.7216 11.86C27.2549 12.9685 27.0216 14.2416 27.0216 15.6791C27.0216 17.0994 27.2299 18.5889 27.6466 20.1477H46.3216ZM44.0716 20.1477V0.922363H40.5216V20.1477H44.0716Z" fill="#343C6A" fill-opacity="0.75"/>
            <path d="M26.0046 32.3012C34.0534 32.3012 40.4154 31.9898 46.2367 28.5807C46.7517 28.2766 47.1364 28.8088 46.7071 29.1993C41.2447 34.1651 34.0247 37.1509 26.0046 37.1509C25.9386 37.1509 25.8724 37.1506 25.8061 37.1502C25.7398 37.1506 25.6737 37.1509 25.6076 37.1509C17.5875 37.1509 10.3674 34.1651 4.90508 29.1993C4.47595 28.8088 4.86045 28.2766 5.37545 28.5807C11.1967 31.9898 19.0534 32.3012 26.0046 32.3012Z" fill="#343C6A"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M3.88161 24.9456C4.54958 26.1853 4.82141 27.6616 4.38675 28.4908C3.77728 29.6534 2.10177 29.9887 0.202548 29.9403C0.0532282 29.9365 -0.0765998 29.7907 0.0534216 29.7675C1.53316 29.497 2.31459 28.7162 2.88675 27.6247C3.27263 26.8886 3.77428 25.9755 3.50878 24.8597C3.46858 24.6911 3.76988 24.7397 3.88161 24.9456Z" fill="#FEAA09"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M47.8251 24.9456C47.1571 26.1853 46.8854 27.6616 47.3201 28.4908C47.9294 29.6534 49.6051 29.9887 51.5041 29.9403C51.6534 29.9365 51.7834 29.7907 51.6534 29.7675C50.1734 29.497 49.3921 28.7162 48.8201 27.6247C48.4341 26.8886 47.9324 25.9755 48.1981 24.8597C48.2381 24.6911 47.9367 24.7397 47.8251 24.9456Z" fill="#FEAA09"/>
            <defs>
                <filter id="filter0_d_525_706" x="51.625" y="1.38989" width="133.422" height="34.7812" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                    <feFlood flood-opacity="0" result="BackgroundImageFix"/>
                    <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
                    <feOffset dy="4"/>
                    <feGaussianBlur stdDeviation="2"/>
                    <feComposite in2="hardAlpha" operator="out"/>
                    <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"/>
                    <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_525_706"/>
                    <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_525_706" result="shape"/>
                </filter>
            </defs>
        </svg>
    </div>
    <div class="content">
        <p class="greeting">Bonjour {{ $notifiable->first_name }} {{ $notifiable->last_name }},</p>

        <p class="greeting">Votre inscription @if($schoolName)à {{ $schoolName }} @endif a été confirmée avec succès.</p>

        <h2 class="section-title">Détail de l'inscription</h2>

        @foreach($studentsData as $data)
            <div class="student-block">
                <h3 class="student-name">{{ $data['student']->first_name }} {{ $data['student']->last_name }}</h3>

                @foreach($data['enrollments'] as $enrollment)
                    <div class="class-block">
                        <div class="class-name">
                            {{ $enrollment->classroom->name }}
                            @if($enrollment->classroom->cursus)
                                - {{ $enrollment->classroom->cursus->name }}
                            @endif
                        </div>

                        @if($enrollment->classroom->schedules->count() > 0)
                            <div class="schedule-list">
                                @foreach($enrollment->classroom->schedules as $schedule)
                                    <div class="schedule-item">
                                        {{ $schedule->day }} : {{ $schedule->start_time }} - {{ $schedule->end_time }}
                                        @if($schedule->teacher_name)
                                            ({{ $schedule->teacher_name }})
                                        @endif
                                    </div>
                                @endforeach
                            </div>
                        @endif

                        @if($enrollment->classroom->telegram_link)
                            <a href="{{ $enrollment->classroom->telegram_link }}" class="telegram-link">
                                Groupe Telegram : {{ $enrollment->classroom->telegram_link }}
                            </a>
                        @endif
                    </div>
                @endforeach
            </div>
        @endforeach

        <div class="summary-section">
            <div class="summary-title">Résumé du paiement</div>
            <div class="summary-row">
                <span>Montant total</span>
                <span>{{ number_format($paymentDetails['montant_total'], 2, ',', ' ') }} €</span>
            </div>
            <div class="summary-row">
                <span>Montant payé</span>
                <span>{{ number_format($paymentDetails['montant_paye'], 2, ',', ' ') }} €</span>
            </div>
            <div class="summary-row summary-total">
                <span>Reste à payer</span>
                <span>0,00 €</span>
            </div>
        </div>

        <p class="closing">Cordialement,<br>L'équipe Toollab</p>
    </div>
    <div class="footer">
        <p>Cet email est envoyé automatiquement suite à la finalisation de votre paiement.</p>
    </div>
</div>
</body>
</html>
